{% extends "frontend/base.html" %}

{% block extra_head %}
<link href="/static/css/bootstrap-multiselect.css" rel="stylesheet" type="text/css" />
{% endblock extra_head %}

{% block content %}
    <div class="page-wrapper-row full-height">
                <div class="page-wrapper-middle">
                    <!-- BEGIN CONTAINER -->
                    <div class="page-container">
                        <!-- BEGIN CONTENT -->
                        <div class="page-content-wrapper">
                            <!-- BEGIN CONTENT BODY -->
                            <!-- BEGIN PAGE HEAD-->
                            <div class="page-head">
                                <div class="container">
                                    <!-- BEGIN PAGE TITLE -->
                                    <div class="page-title">
                                        <h1>Consulta
                                            <!-- <small>dashboard & statistics</small> -->
                                        </h1>
                                    </div>
                                    <!-- END PAGE TITLE -->
                                </div>
                            </div>
                            <!-- END PAGE HEAD-->
                            <!-- BEGIN PAGE CONTENT BODY -->
                            <div class="page-content">
                                <div class="container">
                                    <!-- BEGIN PAGE BREADCRUMBS -->
                                    <ul class="page-breadcrumb breadcrumb">
                                        <li>
                                            <a href="/">Inicio</a>
                                            <i class="fa fa-circle"></i>
                                        </li>
                                        <li>
                                            <span>Consulta</span>
                                        </li>
                                    </ul>
                                    <!-- END PAGE BREADCRUMBS -->
                                    <!-- BEGIN PAGE CONTENT INNER -->
                                    <div class="page-content-inner">
                                        <div class="mt-content-body">
                                            <div class="row justify-content-md-center">
                                                <div class="col-md-8 col-md-offset-2">
                                                    <div class="portlet box blue ">
                                                        <div class="portlet-title">
                                                            <div class="caption">
                                                                <i class="icon-settings"></i>
                                                                <span class="caption-subject sbold uppercase">Formulario Consulta</span>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="portlet-body form">
                                                            <form class="form-horizontal" action="." method="post" role="form">{% csrf_token %}
                                                                <div class="form-body">
                                                                    <div class="row">
                                                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-md-4 control-label">Año</label>
                                                                                <div class="col-md-8">
                                                                                    {{form.anio}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!--<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-md-4 control-label">Departamento</label>
                                                                                <div class="col-md-8">
                                                                                    <select class="form-control">
                                                                                        <option>Managua</option>
                                                                                        <option>Option 2</option>
                                                                                        <option>Option 3</option>
                                                                                        <option>Option 4</option>
                                                                                        <option>Option 5</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>-->
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-md-4 control-label">Municipio</label>
                                                                                <div class="col-md-8">
                                                                                    {{form.municipio}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-md-4 control-label">Comunidad</label>
                                                                                <div class="col-md-8">
                                                                                    {{form.comunidad}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                       <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                                            <div class="form-group">
                                                                                <label class="col-md-2 control-label">Sexo</label>
                                                                                <div class="col-md-10">
                                                                                {{form.sexo}}
                                                                                    <!--<div class="mt-radio-inline">
                                                                                        <label class="mt-radio">
                                                                                            <input type="radio" name="optionsRadios" id="optionsRadios25" value="option1" checked> Ambos
                                                                                            <span></span>
                                                                                        </label>
                                                                                        <label class="mt-radio">
                                                                                            <input type="radio" name="optionsRadios" id="optionsRadios26" value="option2" checked> Hombre
                                                                                            <span></span>
                                                                                        </label>
                                                                                        <label class="mt-radio mt-radio-disabled">
                                                                                            <input type="radio" name="optionsRadios" id="optionsRadios27" value="option3" disabled> Mujer
                                                                                            <span></span>
                                                                                        </label>
                                                                                    </div>-->
                                                                                </div>
                                                                            </div>
                                                                       </div> 
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                                            <div class="form-group">
                                                                                <label class="col-md-2 control-label">Rango edad</label>
                                                                                <div class="col-md-10">
                                                                                    Inicio {{form.edad_inicio}}  Fin {{form.edad_fin}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                </div>
                                                                <div class="form-actions right1">
                                                                    <button type="button" class="btn default">Cancelar</button>
                                                                    <input type="submit" name="consulta" value="Consultar" class="btn green">
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                 </div>
                                                 {% if centinela == 1 %}
                                                                                       
                                                <div class="col-md-10 col-md-offset-1">
                                                    <!-- BEGIN SAMPLE FORM PORTLET-->
                                                    <div class="portlet box blue ">
                                                        <div class="portlet-title">
                                                            <div class="caption">
                                                                <i class="icon-settings"></i>
                                                                <span class="caption-subject sbold uppercase">Indicadores</span>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="portlet-body form">
                                                            <form class="form-horizontal" role="form">
                                                                <div class="form-body">
                                                                        <ul class="indicadores row">
                                                                            <li class="col-md-3">
                                                                                <a href="/datos-generales/" class="btn green-meadow">Datos Generales</a>
                                                                            </li>
                                                                            <li class="col-md-3">
                                                                                <a href="/datos-familiares/" class="btn green-meadow">Datos Familiares</a>
                                                                            </li>
                                                                            <li class="col-md-3">
                                                                                <a href="/datos-propiedad/" class="btn green-meadow">Datos de la Propiedad</a>
                                                                            </li>
                                                                            <li class="col-md-3">
                                                                                <a href="/datos-produccion/" class="btn green-meadow">Datos de Producción</a>
                                                                            </li>
                                                                            <li class="col-md-3">
                                                                               <a href="/organizacion/" class="btn green-meadow">Organización</a>
                                                                            </li>
                                                                            <!--<li class="col-md-3">
                                                                                <button type="button" class="btn green-meadow">Empleo</button>
                                                                                
                                                                            </li>-->
                                                                        </ul>                                                                   
                                                                        <div class=" row">

                                                                    
                                                                            </div>
                                                                    
                                                                    
                                                                </div>
                                                            
                                                            </form>
                                                        </div>
                                                    </div>
                                                    <!-- END SAMPLE FORM PORTLET-->

                                                </div>
                                                {% endif %}
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <!-- END PAGE CONTENT INNER -->
                                </div>
                            </div>
                            <!-- END PAGE CONTENT BODY -->
                            <!-- END CONTENT BODY -->
                        </div>
                        <!-- END CONTENT -->
                    </div>
                    <!-- END CONTAINER -->
                </div>
            </div>
{% endblock content %}

{% block extra_js %}

<script src="/static/plugins/moment.min.js" type="text/javascript"></script>
<script src="/static/plugins/bootstrap-daterangepicker/daterangepicker.min.js" type="text/javascript"></script>
<script src="/static/plugins/morris/morris.min.js" type="text/javascript"></script>
<script src="/static/plugins/morris/raphael-min.js" type="text/javascript"></script>
<script src="/static/plugins/counterup/jquery.waypoints.min.js" type="text/javascript"></script>
<script src="/static/plugins/counterup/jquery.counterup.min.js" type="text/javascript"></script>
<script src="/static/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
<script src="/static/plugins/flot/jquery.flot.min.js" type="text/javascript"></script>
<script src="/static/plugins/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
<script src="/static/plugins/flot/jquery.flot.categories.min.js" type="text/javascript"></script>
<script src="/static/plugins/jquery-easypiechart/jquery.easypiechart.min.js" type="text/javascript"></script>
<script src="/static/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/jquery.vmap.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.russia.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.world.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.europe.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.germany.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
<script src="/static/plugins/jqvmap/jqvmap/data/jquery.vmap.sampledata.js" type="text/javascript"></script>
<!-- js multiselect -->
<script src="/static/js/bootstrap-multiselect.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('select').addClass('form-control');

    $("#id_municipio").addClass("form-control").multiselect({
      buttonWidth: '100%',
      includeSelectAllOption: true,
      selectAllText: "Seleccionar todos",
      buttonText: function(options, select) {
        if (options.length === 0) {
          return "Sin selección ...";
        }
        else if (options.length > 3) {
          return "Varias opciones seleccionadas!";
        }
        else {
          var labels = [];
          options.each(function() {
            if ($(this).attr('label') !== undefined) {
              labels.push($(this).attr('label'));
            }
            else {
              labels.push($(this).html());
            }
          });
          return labels.join(', ') + '';
        }
      }
    });

    $("#id_comunidad").addClass("form-control").multiselect({
      buttonWidth: '100%',
      includeSelectAllOption: true,
      selectAllText: "Seleccionar todos",
      buttonText: function(options, select) {
        if (options.length === 0) {
          return "Sin selección ...";
        }
        else if (options.length > 3) {
          return "Varias opciones seleccionadas!";
        }
        else {
          var labels = [];
          options.each(function() {
            if ($(this).attr('label') !== undefined) {
              labels.push($(this).attr('label'));
            }
            else {
              labels.push($(this).html());
            }
          });
          return labels.join(', ') + '';
        }
      }
    });

    $("#id_comunidad").multiselect('disable');

    var foo = [];
    $(document).on('change','#id_municipio',function(){
      $('#id_municipio :selected').each(function(i, selected){
        foo[i] = $(selected).val();
        $('#id_comunidad').multiselect('rebuild');
      });
      $.getJSON('/ajax/comunidades/?ids='+foo.join(","), function(data){
        $('#id_comunidad').html('');
        $('#id_comunidad').multiselect('enable');
        $("#id_comunidad").multiselect('refresh');
        var comunidad = $('#id_comunidad');
        if(data){
          $.each(data, function(i, item){

            $.each(item, function(j, item2){
              var group = $('<optgroup></optgroup>').attr('label', j);
              $.each(item2, function(k, item3){
                group.append($('<option></option>').val(item3.id).html(item3.nombre));
              });
              group.appendTo(comunidad);
              $('#id_comunidad').multiselect('rebuild');
            });
          });
        }
      });
    });
});
</script>
    <script type="text/javascript">
        $( ".hor-menu ul li" ).removeClass( "active" );
        $( ".hor-menu ul li.consulta" ).addClass( "active" );
    </script>
{% endblock extra_js %}
            

